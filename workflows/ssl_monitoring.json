{
  "name": "SSL Monitoring - Weekly Monday Check",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * 1"
            }
          ]
        }
      },
      "id": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
      "name": "Weekly SSL Check - Mondays 9AM",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        240,
        300
      ]
    },
    {
      "parameters": {
        "command": "python /data/scripts/verificar_ssl.py",
        "options": {}
      },
      "id": "f47ac10b-58cc-4372-a567-0e02b2c3d480",
      "name": "Run SSL Check",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        460,
        300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.stderr}}",
              "operation": "isEmpty"
            }
          ]
        }
      },
      "id": "f47ac10b-58cc-4372-a567-0e02b2c3d481",
      "name": "Check Success",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        680,
        300
      ]
    },
    {
      "parameters": {
        "command": "python /data/scripts/enviar_alertas.py",
        "options": {}
      },
      "id": "f47ac10b-58cc-4372-a567-0e02b2c3d482",
      "name": "Send Alerts",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        900,
        220
      ]
    },
    {
      "parameters": {
        "subject": "❌ Error en verificación SSL",
        "message": "El sistema de verificación SSL falló:\n\nError: {{$node[\"Run SSL Check\"].json.stderr}}\n\nRevisa el servidor lo antes posible.",
        "options": {
          "allowUnauthorizedCerts": true
        }
      },
      "id": "f47ac10b-58cc-4372-a567-0e02b2c3d483",
      "name": "Error Notification",
      "type": "n8n-nodes-base.sendEmail",
      "typeVersion": 1,
      "position": [
        900,
        380
      ],
      "credentials": {
        "sendEmail": {
          "id": "gmail-smtp",
          "name": "Gmail SMTP CrecemosLab"
        }
      }
    }
  ],
  "connections": {
    "Daily SSL Check": {
      "main": [
        [
          {
            "node": "Run SSL Check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run SSL Check": {
      "main": [
        [
          {
            "node": "Check Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Success": {
      "main": [
        [
          {
            "node": "Send Alerts",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Error Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-01-04T13:45:00.000Z",
  "id": "ssl-monitoring-workflow",
  "settings": {
    "timezone": "America/Bogota"
  },
  "staticData": null,
  "tags": [
    {
      "id": "ssl",
      "name": "SSL Monitoring"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2025-01-04T13:45:00.000Z",
  "versionId": "1"
}
